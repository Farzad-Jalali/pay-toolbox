---
applications:
- name: toolbox
  buildpacks:
  - https://github.com/alphagov/env-map-buildpack.git#v1
  - https://github.com/cloudfoundry/nodejs-buildpack.git#v1.7.9
  health-check-type: http
  health-check-http-endpoint: '/healthcheck'
  health-check-invocation-timeout: 5
  memory: ((memory))
  disk_quota: ((disk_quota))
  services:
    - app-catalog
  command: npm start
  env:
    NODE_ENV: production
    ENVIRONMENT: ((space))
    
    # The following URLs are provisioned by the `app-catalog` user-provided service 
    ADMINUSERS_URL: ""
    CONNECTOR_URL: ""
    DIRECT_DEBIT_CONNECTOR_URL: ""
    PRODUCTS_URL: ""
    PUBLIC_AUTH_URL: ""
    LEDGER_URL: ""

    DISABLE_REQUEST_LOGGING: ((toolbox_disable_request_logging))
    COOKIE_SESSION_ENCRYPTION_SECRET: ((toolbox_cookie_session_encryption_secret))
    SENTRY_DSN: ((toolbox_sentry_dsn))
    AUTH_GITHUB_ENABLED: ((toolbox_auth_github_enabled))
    AUTH_GITHUB_TEAM_ID: ((toolbox_auth_github_team_id))
    AUTH_GITHUB_ADMIN_TEAM_ID: ((toolbox_auth_github_admin_team_id))
    AUTH_GITHUB_CLIENT_ID: ((toolbox_auth_github_client_id))
    AUTH_GITHUB_CLIENT_SECRET: ((toolbox_auth_github_client_secret))
    STRIPE_ACCOUNT_API_KEY: ((toolbox_stripe_account_api_key))
