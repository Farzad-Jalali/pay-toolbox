---
applications:
- name: toolbox
  buildpacks:
  - https://github.com/cloudfoundry/nodejs-buildpack.git#v1.7.9
  health-check-type: http
  health-check-http-endpoint: '/healthcheck'
  health-check-invocation-timeout: 5
  memory: ((memory))
  disk_quota: ((disk_quota))
  command: npm start
  env:
    NODE_ENV: production
    ENVIRONMENT: ((space))
    ADMINUSERS_URL: ((adminusers_url))
    CONNECTOR_URL: ((card_connector_url))
    DIRECT_DEBIT_CONNECTOR_URL: ((direct_debit_connector_url))
    PRODUCTS_URL: ((products_url))
    PUBLIC_AUTH_URL: ((publicauth_url))
    LEDGER_URL: ((ledger_url))

    DISABLE_REQUEST_LOGGING: ((toolbox_disable_request_logging))
    COOKIE_SESSION_ENCRYPTION_SECRET: ((toolbox_cookie_session_encryption_secret))
    SENTRY_DSN: ((toolbox_sentry_dsn))
    AUTH_GITHUB_ENABLED: ((toolbox_auth_github_enabled))
    AUTH_GITHUB_TEAM_ID: ((toolbox_auth_github_team_id))
    AUTH_GITHUB_ADMIN_TEAM_ID: ((toolbox_auth_github_admin_team_id))
    AUTH_GITHUB_CLIENT_ID: ((toolbox_auth_github_client_id))
    AUTH_GITHUB_CLIENT_SECRET: ((toolbox_auth_github_client_secret))
    STRIPE_ACCOUNT_API_KEY: ((toolbox_stripe_account_api_key))
  routes:
  - route: ((toolbox_url))
